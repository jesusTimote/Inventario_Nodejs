<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

<section class="content">
    <div class="row">
        <div class="col-md-3">
            <!-- Profile Image -->
            <div class="box box-primary" style="border-top: 3px solid;border-top-color: #3c8dbc;">
                <div class="box-body box-profile">
                    <div id="load_img">
                        <img class=" img-responsive" src="/img/product.png" alt="Bussines profile picture" id="prevImg">
                    </div>

                    <h3 class="profile-username text-center"></h3>

                    <p class="text-muted text-center mail-text"></p>

                </div>
                <!-- /.box-body -->
            </div>
            <!-- /.box -->
        </div>
        <div class="col-md-9">
            <form action="/views/add-Product/" method="post" enctype="multipart/form-data" class="form-horizontal" id="add-product">

                <div class="" id="details">

                    <div class="form-group ">
                        <label for="codigo" class="col-sm-2 control-label">Código</label>

                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="codigo" name="codigo" required="">
                            <input type="hidden" id="product_id" name="product_id" value="1640457754">
                        </div>
                        <label for="cod_barras" class="col-sm-2 control-label">Codigo Barra</label>

                        <div class="col-sm-4">
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-barcode"></i>
                                </div>
                                <input type="text" class="form-control" id="cod_barras" name="cod_barras">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="producto" class="col-sm-2 control-label">Producto</label>

                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="producto" name="producto" required="">
                        </div>
                        <label for="marca" class="col-sm-2 control-label">Marca</label>

                        <div class="col-sm-4">
                            <input type="text" class="form-control" id="marca" name="marca"
                                maxlength="100">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="descripcion" class="col-sm-2 control-label">Descripción</label>
                        <div class="col-sm-10">
                            <textarea class="form-control" name="descripcion" id="descripcion"></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="fabricante" class="col-sm-2 control-label">Fabricante</label>

                        <div class="col-sm-4">
                            <select class="form-control" name="fabricante" id="fabricante" required="">
                                <option value="">Selecciona</option>
                                <option value="Acer">Acer</option>
                                <option value="Dell">Dell</option>
                                <option value="Gateway">Gateway</option>
                                <option value="HP">HP</option>
                                <option value="HP">Lenovo</option>
                                <option value="Samsung">Samsung</option>
                                <option value="Sony">Sony</option>
                                <option value="Toshiba">Toshiba</option>
                            </select>
                        </div>

                        <label for="estado" class="col-sm-2 control-label">Estado</label>

                        <div class="col-sm-4">
                            <select class="form-control" name="estado" id="estado">
                                <option value="Activo">Activo</option>
                                <option value="Inactivo">Inactivo</option>
                            </select>
                        </div>


                    </div>

                    <div class="form-group">
                        <label for="pre_compra" class="col-sm-2 control-label">Precio Compra</label>

                        <div class="col-sm-4">
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fas fa-money-bill-wave"></i>
                                    
                                </div>
                                <input type="text" class="form-control" id="pre_compra" name="pre_compra"
                                    required="" pattern="\d+(\.\d{2})?" title="precio con 2 decimales"
                                    >
                            </div>
                        </div>
                        <label for="pre_venta" class="col-sm-2 control-label">Precio Venta</label>

                        <div class="col-sm-4">
                            <div class="input-group">
                                <div class="input-group-addon">
                                   <i class="fas fa-money-bill-wave"></i>
                                   
                                </div>
                                <input type="text" class="form-control" id="pre_venta" name="pre_venta" required=""
                                    pattern="\d+(\.\d{2})?" title="precio con 2 decimales">
                            </div>
                        </div>


                    </div>

                    <div class="form-group">
                        <label for="stck_minimo" class="col-sm-2 control-label">Stock Minimo</label>

                        <div class="col-sm-4">
                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fas fa-chart-bar"></i>
                                </div>
                                <input type="text" class="form-control" id="stck_minimo" name="stck_minimo"
                                    required="" pattern="\d+(\.\d{2})?" title="Stock producto">
                            </div>
                        </div>

                        <label for="stock" class="col-sm-2 control-label">Stock</label>

                        <div class="col-sm-4">
                            <div class="input-group">
                                <div class="input-group-addon">
                                   <i class="fas fa-chart-bar"></i>
                                </div>
                                <input type="text" class="form-control" id="stock" name="stock" required=""
                                    pattern="\d{1,11}" maxlength="11">
                            </div>
                        </div>


                    </div>

                    <div class="form-group">
                        <label for="image" class="col-sm-2 control-label">Imagen</label>

                        <div class="col-sm-6">
                            <input type="file" class="form-control" name="imagefile" id="imagefile"
                                >
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-sm-offset-2 col-sm-6">
                            <button type="submit" class="btn btn-primary actualizar_datos">Guardar datos</button>
                        </div>
                    </div>

                </div>
            </form>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
    const $form =document.querySelector("#add-product")

    const $prevImg = document.querySelector("#prevImg")
     const $imagefile = document.querySelector("#imagefile")
    function renderImage(formData){
        const file = formData.get("imagefile")
        const images=URL.createObjectURL(file)
        $prevImg.setAttribute("src",images)
    }

   $imagefile.addEventListener("change",e=>{
            const formData = new FormData($form)
            renderImage(formData)
    })
</script>